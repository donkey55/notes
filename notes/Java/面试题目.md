# Java题目

### 请描述HashMap的实现原理

HashMap的主要功能是存储键值对，能够根据key在O(1)时间内得到对应的value

它的存储有两种方式，当数据量较小时，会使用数组+链表的方式，节点增多时，采用数组+红黑树的方式。

HashMap的实现主要可以分为以下几个核心函数：

构造函数

HashMap的构造函数包含了HashMap的几个重要参数：

* loadFactor，负载因子，它决定了hashmap存储时节点的密度，->0 更稀疏，->1更紧凑，主要通过影响threshold参数来实现的，这个参数决定了hashmap的数组的扩容时机。loadFactor默认值为0.75
* size，HashMap的初始化大小，默认是8，每次扩容是2的倍数。

put函数，将键值对放入到hashmap中，hashmap实现的核心逻辑，具体来说主要包括以下的步骤

当新的key被放入到map中时，会首先获取key的hashcode，并对其经过一个hash值的扰动，来尽量减少hash碰撞的概率

根据hash值和当前数组大小得到此key应该放入到数组位置

如果当前位置已经有了节点，那么加入到链表的最后或者红黑树中。同时会比较是否已经存在此key，如果存在则将value覆盖原来的key

如果不存在，则创建Entry对象，将其放入到链表和红黑树中。

链表和红黑树的转变时机，如果插入一个节点时，如果当前链表长度超过默认值的8，此时会尝试将链表转换为红黑树，但如果此时数组的大小小于64，那么会优先扩容数组，而不会将链表转换为红黑树，如果大于64，那么会将其转换为红黑树。

数组扩容时机，当插入一个键值对完成后，最后会对桶的个数进行检查，如果数组大小大于了threshold，此时会进行扩容，每次扩容的大小是原来的两倍

### 怎么分析进程占用的cpu、内存？

> top命令的参数

### spring bean的初始化顺序如何指定？

### 循环依赖如何解决？

### cpu到了100%，如何定位排查？